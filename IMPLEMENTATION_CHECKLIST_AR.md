# โ ูุงุฆูุฉ ุงูุชุญูู - Implementation Checklist

## ๐ฏ ุฎุทุฉ ุงูุชุทุจูู ุงููุงููุฉ

ุงุชุจุน ูุฐู ุงูุฎุทูุงุช ุจุงูุชุฑุชูุจ ูุถูุงู ูุฌุงุญ ุชุทุจูู ุญู CSRF:

---

## ุงููุฑุญูุฉ 1: ุงูุฅุนุฏุงุฏ ุงูุฃุณุงุณู (5 ุฏูุงุฆู)

### โ Backend Setup

- [ ] **1.1** ุงูุชุญ ููู `.env` ูู `tf1-backend/`
  ```powershell
  cd tf1-backend
  notepad .env
  ```

- [ ] **1.2** ุฃุถู ุงูุฅุนุฏุงุฏุงุช ุงูุชุงููุฉ:
  ```bash
  CSRF_SECRET=314c505cdb3e165a87b041461d02a40cf17e82113be58fc757336a7b53db6e8d
  CSRF_TOKEN_TTL_MS=3600000
  ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5000
  FRONTEND_URL=http://localhost:3000
  NODE_ENV=development
  ```

- [ ] **1.3** ุงุญูุธ ููู `.env`

- [ ] **1.4** ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ:
  ```powershell
  npm run dev
  ```

- [ ] **1.5** ุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก ูู ุงูู logs

---

## ุงููุฑุญูุฉ 2: ุงูุงุฎุชุจุงุฑ (3 ุฏูุงุฆู)

### โ ุงุฎุชุจุงุฑ Backend

- [ ] **2.1** ุงุฎุชุจุงุฑ Diagnostic Endpoint:
  ```powershell
  curl http://localhost:4000/api/v1/auth/csrf-diagnostic
  ```
  **ุงููุชูุฌุฉ ุงููุชููุนุฉ:** `"status": "OK"`

- [ ] **2.2** ุงุฎุชุจุงุฑ Token Generation:
  ```powershell
  curl http://localhost:4000/api/v1/auth/csrf-token
  ```
  **ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ุชุญุตู ุนูู token

- [ ] **2.3** ุงูุชุญ `test-csrf.html` ูู ุงููุชุตูุญ
  - [ ] ุงุถุบุท "ูุญุต ุงูุชูููู" โ ูุฌุจ ุฃู ููุฌุญ
  - [ ] ุงุถุบุท "ุงุญุตู ุนูู Token" โ ูุฌุจ ุฃู ููุฌุญ
  - [ ] ุงุถุบุท "ุงุฎุชุจุงุฑ ูุงูู" โ ูุฌุจ ุฃู ููุฌุญ

- [ ] **2.4** (ุงุฎุชูุงุฑู) ุดุบู ุงูุงุฎุชุจุงุฑ ุงูุชููุงุฆู:
  ```powershell
  .\test-csrf.ps1
  ```

---

## ุงููุฑุญูุฉ 3: ุชุทุจูู Frontend (10-15 ุฏูููุฉ)

### โ ุงุฎุชุฑ ุงูุชูููุฉ ุงูููุงุณุจุฉ:

#### ุงูุฎูุงุฑ ุฃ: React Hook (ููุตู ุจู ููู React)

- [ ] **3.A.1** ุงูุณุฎ ุงูููู:
  ```bash
  copy frontend\useCSRF.tsx your-frontend\src\hooks\useCSRF.tsx
  ```

- [ ] **3.A.2** ุงุณุชุฎุฏูู ูู Login Component:
  ```tsx
  import { useCSRF } from '@/hooks/useCSRF';
  
  function LoginForm() {
    const { fetchWithCSRF } = useCSRF();
    // ุงุณุชุฎุฏู fetchWithCSRF ุจุฏูุงู ูู fetch
  }
  ```

- [ ] **3.A.3** ุงุฎุชุจุฑ Login ูู ุชุทุจููู

#### ุงูุฎูุงุฑ ุจ: Axios (ููุตู ุจู ูุฌููุน ุงูุฃููุงุน)

- [ ] **3.B.1** ุงูุณุฎ ุงูููู:
  ```bash
  copy frontend\axios-csrf.ts your-frontend\src\api\axios-csrf.ts
  ```

- [ ] **3.B.2** ุงุณุชุจุฏู axios ุงูุนุงุฏู ุจูุฐุง:
  ```typescript
  import { api } from '@/api/axios-csrf';
  // ุงุณุชุฎุฏู api ุจุฏูุงู ูู axios
  await api.post('/api/v1/auth/login', { email, password });
  ```

- [ ] **3.B.3** ุงุฎุชุจุฑ ุฌููุน API calls

#### ุงูุฎูุงุฑ ุฌ: Fetch API (ููุงุณุชุฎุฏุงู ุงูุนุงู)

- [ ] **3.C.1** ุงูุณุฎ ุงูููู:
  ```bash
  copy frontend\csrf-manager.ts your-frontend\src\utils\csrf-manager.ts
  ```

- [ ] **3.C.2** ุงุณุชุฎุฏูู:
  ```typescript
  import { csrfManager } from '@/utils/csrf-manager';
  await csrfManager.fetch('/api/v1/auth/login', {
    method: 'POST',
    body: JSON.stringify({ email, password })
  });
  ```

- [ ] **3.C.3** ุงุฎุชุจุฑ API calls

---

## ุงููุฑุญูุฉ 4: ุงูุงุฎุชุจุงุฑ ุงูุดุงูู (5 ุฏูุงุฆู)

### โ ุงุฎุชุจุงุฑ Frontend + Backend ูุนุงู

- [ ] **4.1** ุงูุชุญ ุชุทุจูู Frontend

- [ ] **4.2** ุงุฎุชุจุฑ Login:
  - [ ] ุฃุฏุฎู ุจูุงูุงุช ุตุญูุญุฉ
  - [ ] ุชุญูู ูู ุนุฏู ุธููุฑ ุฎุทุฃ CSRF
  - [ ] ุชุญูู ูู ูุฌุงุญ Login

- [ ] **4.3** ุงุฎุชุจุฑ Register:
  - [ ] ุฃูุดุฆ ุญุณุงุจ ุฌุฏูุฏ
  - [ ] ุชุญูู ูู ุนุฏู ุธููุฑ ุฎุทุฃ CSRF
  - [ ] ุชุญูู ูู ูุฌุงุญ ุงูุชุณุฌูู

- [ ] **4.4** ุงุฎุชุจุฑ Logout:
  - [ ] ุณุฌู ุฎุฑูุฌ
  - [ ] ุชุญูู ูู ูุณุญ Token

- [ ] **4.5** ุงูุชุญ DevTools โ Console:
  - [ ] ุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก CSRF
  - [ ] ุชุญูู ูู ุฅุฑุณุงู `X-CSRF-Token` header

- [ ] **4.6** ุงูุชุญ DevTools โ Network:
  - [ ] ุชุญูู ูู ูุฌูุฏ `X-CSRF-Token` ูู requests
  - [ ] ุชุญูู ูู ูุฌูุฏ `XSRF-TOKEN` cookie

---

## ุงููุฑุญูุฉ 5: ุงูุชุญูู ุงูููุงุฆู (2 ุฏูููุฉ)

### โ Checklist ุงูููุงุฆู

- [ ] **5.1** Backend:
  - [ ] โ CSRF_SECRET ููุฌูุฏ ูู .env
  - [ ] โ ALLOWED_ORIGINS ูุญุฏุซ
  - [ ] โ ุงูุณูุฑูุฑ ูุนูู ุจุฏูู ุฃุฎุทุงุก
  - [ ] โ Diagnostic endpoint ูุนุทู "OK"

- [ ] **5.2** Frontend:
  - [ ] โ Helper ููุณูุฎ ููุณุชุฎุฏู
  - [ ] โ Login ูุนูู
  - [ ] โ Register ูุนูู
  - [ ] โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก CSRF

- [ ] **5.3** Testing:
  - [ ] โ test-csrf.html ูุนูู
  - [ ] โ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุชูุฌุญ
  - [ ] โ ุชู ุงูุงุฎุชุจุงุฑ ูู ุงููุชุตูุญ

---

## ุงููุฑุญูุฉ 6: ุงูุชูุซูู (ุงุฎุชูุงุฑู)

### โ ูุซู ุงูุชุบููุฑุงุช

- [ ] **6.1** ุฃุถู ุชุนููู ูู ููุฏ Frontend:
  ```typescript
  // CSRF Protection implemented using [useCSRF/axios-csrf/csrf-manager]
  // See: tf1-backend/CSRF_COMPLETE_SOLUTION_AR.md
  ```

- [ ] **6.2** ุญุฏูุซ README ูู Frontend ุฅุฐุง ูุฒู ุงูุฃูุฑ

- [ ] **6.3** ุฃุถู ููุงุญุธุงุช ูููุฑูู

---

## ๐จ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูุงุฌูุช ูุดุงูู:

#### ุฎุทุฃ: "CSRF_SECRET not configured"
- [ ] ุชุญูู ูู ูุฌูุฏ `CSRF_SECRET` ูู `.env`
- [ ] ุชุญูู ูู ุญูุธ ุงูููู
- [ ] ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ

#### ุฎุทุฃ: "CSRF token missing"
- [ ] ุชุญูู ูู ุงุณุชุฎุฏุงู Frontend helper ุจุดูู ุตุญูุญ
- [ ] ุชุญูู ูู `credentials: 'include'` ูู fetch
- [ ] ุชุญูู ูู `withCredentials: true` ูู axios

#### ุฎุทุฃ: "Origin not allowed"
- [ ] ุฃุถู origin ุฅูู `ALLOWED_ORIGINS`
- [ ] ุชุฃูุฏ ูู ูุชุงุจุฉ URL ุจุดูู ุตุญูุญ
- [ ] ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุฑ

#### ุฎุทุฃ: "Token expired"
- [ ] ุงุญุตู ุนูู token ุฌุฏูุฏ
- [ ] ุฒุฏ `CSRF_TOKEN_TTL_MS` ุฅุฐุง ูุฒู ุงูุฃูุฑ

---

## ๐ Progress Tracker

### ููุฎุต ุงูุชูุฏู:

```
ุงููุฑุญูุฉ 1: Backend Setup       [ ] 0/5
ุงููุฑุญูุฉ 2: ุงูุงุฎุชุจุงุฑ            [ ] 0/4
ุงููุฑุญูุฉ 3: Frontend Implementation [ ] 0/3
ุงููุฑุญูุฉ 4: ุงูุงุฎุชุจุงุฑ ุงูุดุงูู     [ ] 0/6
ุงููุฑุญูุฉ 5: ุงูุชุญูู ุงูููุงุฆู      [ ] 0/3
ุงููุฑุญูุฉ 6: ุงูุชูุซูู (ุงุฎุชูุงุฑู)   [ ] 0/3

ุงูุฅุฌูุงูู: 0/24 ูููุฉ ููุชููุฉ
```

---

## ๐ฏ ุงููุฑุงุฌุน ุงูุณุฑูุนุฉ

| ุนูุฏ ุงูุญุงุฌุฉ ุฅูู | ุงูุชุญ ูุฐุง ุงูููู |
|----------------|----------------|
| ุฏููู ุณุฑูุน | `ุชุนูููุงุช_ุณุฑูุนุฉ_CSRF.md` |
| ุญู ูุดููุฉ | `CSRF_QUICK_FIX.md` |
| ููู ุนููู | `CSRF_COMPLETE_SOLUTION_AR.md` |
| ุงุฎุชุจุงุฑ | `test-csrf.html` |
| ููุฏ Frontend | `frontend/[ุงุฎุชุฑ ุงูููุงุณุจ]` |

---

## โ ุจุนุฏ ุงูุงูุชูุงุก

ุนูุฏ ุฅููุงู ุฌููุน ุงููุฑุงุญู:

- [ ] โ ุถุน ุนูุงูุฉ ุนูู ุฌููุน ุงูููุงู
- [ ] โ ุงุฎุชุจุฑ ูู ุจูุฆุฉ ูุดุงุจูุฉ ููุฅูุชุงุฌ
- [ ] โ ุดุงุฑู ูุน ุงููุฑูู
- [ ] ๐ **ุงุญุชูู!** ูุธุงู CSRF ูุนูู!

---

## ๐ ูุนูููุงุช

- **ุงูููุช ุงููุชููุน:** 25-30 ุฏูููุฉ
- **ุงูุตุนูุจุฉ:** ูุชูุณุท โญโญโญโโ
- **ุงููุชุทูุจุงุช:** Backend ูุนูู + Frontend ููุฌูุฏ
- **ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุชุทุจูู

---

**๐ฏ ูุตูุญุฉ:** ุงุชุจุน ุงููุฑุงุญู ุจุงูุชุฑุชูุจ ููุง ุชุชุฎุทู ุฃู ุฎุทูุฉ!

**๐ก ุชุฐูุฑ:** ููููู ุงุณุชุฎุฏุงู `CSRF_DEV_BYPASS=true` ููุชุฌุฑุจุฉ ุงูุณุฑูุนุฉ ููุท!

๐ **ุงุจุฏุฃ ุงูุขู!**
